(function(){"use strict";TS.registerModule("ui.frecency",{onStart:function(){if(TS.client)TS.client.before_login_sig.add(_onBeforeLogin);if(TS.web)TS.web.before_login_sig.add(_onBeforeLogin);TS.prefs.frecency_jumper_changed_sig.add(_setFrecencyCache)},record:function(){_frecency.record.apply(this,arguments)},query:function(){return _frecency.query.apply(this,arguments)},clearCache:function(){_frecency._clearCache.apply(this)}});var _frecency;var _THROTTLE_MS=1e3*60;var _onBeforeLogin=function _onBeforeLogin(){_frecency=TS.frecency.construct("jumper",{onStart:function(namespace){_setPrefThrottled=TS.utility.throttleFunc(_setPrefThrottled,_THROTTLE_MS,true);return TS.model.frecency_jumper},recordFunc:function(cache){TS.model.frecency_jumper=cache;_setPrefThrottled()},onClearCache:function(){TS.prefs.setPrefByAPI({name:"frecency_jumper",value:"{}"})}})};var _setFrecencyCache=function _setFrecencyCache(){_frecency._setCache(TS.model.frecency_jumper)};var _setPrefThrottled=function _setPrefThrottled(){TS.prefs.setPrefByAPI({name:"frecency_jumper",value:JSON.stringify(TS.model.frecency_jumper)})}})();
