<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
     <meta charset="utf-8">
    <title>Miradas 360 - Temporada 01 - Episodio 01 -  TITULO DE LA PRODUCCION</title>
    <!-- Facebook iframe embed  -->
    <meta name="twitter:card" content="player">
    <meta name="twitter:site" content="@divevr">
    <meta name="twitter:title" content="Miradas 360 - Temporada 01 - Episodio 01 -  TITULO DE LA PRODUCCIO">
    <meta name="twitter:description" content="DESCRIPCION 
    por NOMBRES COMPLETOS DEL EQIUPO">
    <meta name="twitter:image" content="https://cdn-images-1.medium.com/max/1600/1*YX3nD8Xj371B0mr3z4jeJA.jpeg">
    <meta name="twitter:player" content="https://miradas360.github.io/miradas360-01/01-Borges/index.html">
    <meta name="twitter:player:width" content="600">
    <meta name="twitter:player:height" content="370">
    
    <meta property="og:title"  content="Miradas 360 - Temporada 01 - Episodio 01 -  TITULO DE LA PRODUCCIO">
    <meta property="og:url" content="https://miradas360.github.io/miradas360-01/01-Borges/index.html">
    <meta property="og:description"  content="Un viaje a la eternidad de Oesterheld.
    por Carolina Cerri, Leonardo Gentile, Martín Rabaglia y María Laura Ruggero">
    <meta property="og:type" content="video" />
    <meta property="og:image" content="https://cdn-images-1.medium.com/max/1600/1*YX3nD8Xj371B0mr3z4jeJA.jpeg" />
    <meta property="og:image:seucre_url" content="https://cdn-images-1.medium.com/max/1600/1*YX3nD8Xj371B0mr3z4jeJA.jpeg" />
     
    <meta property="og:type" content="video" />
    <meta property="og:video:url" content="https://miradas360.github.io/miradas360-01/01-Borges/index.html">
    <meta property="og:video:secure_url" content="https://miradas360.github.io/miradas360-01/01-Borges/index.html">
    <meta property="og:video:type" content="text/html">
    <meta property="og:video:width" content="560">
    <meta property="og:video:height" content="395">

     <meta property="og:video:url" content="https://miradas360.github.io/miradas360-01/01-Borges/index.html">
    <meta property="og:video:secure_url" content="https://miradas360.github.io/miradas360-01/01-Borges/index.html">
    <meta property="og:video:type" content="application/x-shockwave-flash">
    <meta property="og:video:width" content="560">
    <meta property="og:video:height" content="395">
     

    <meta name="description" content="DESCRIPCION 
    por NOMBRES COMPLETOS DEL EQIUPO">

    <script src="js/aframe.min.js"></script>
  </head>
  <body>

    <a-scene>

      <a-assets>

        <img id="bgEscena1" src="img/bgEscena1.jpg">
        <img id="bgEscena2" src="img/bgEscena2.jpg">
        <img id="bgEscena3" src="img/bgEscena3.jpg">
        <img id="bgEscena4" src="img/bgEscena4.jpg">

        <img id="pathEscena1" src="img/pathEscena1.png">
        <img id="tituloEscena1" src="img/tituloEscena1.png">

        <img id="pathEscena2" src="img/pathEscena2.png">
        <img id="tituloEscena2" src="img/tituloEscena2.png">

        <img id="pathEscena3" src="img/pathEscena3.png">
        <img id="tituloEscena3" src="img/tituloEscena3.png">

        <img id="pathEscena4" src="img/pathEscena4.png">
        <img id="tituloEscena4" src="img/tituloEscena4.png">

      </a-assets>

      <a-entity sound="src: sound/astor-piazzolla_luis-medina-castro_jorge-luis-borges--el-tango-1965.mp3; autoplay: true; volume: 0.2;"></a-entity>

      <a-entity position="0 2.2 4">
        <a-entity id="camara" camera look-controls wasd-controls>
          <a-cursor color="#2E3A87">
          <a-image id="path" position="-2.8 0 -1" rotation="0 0 0" width="0.5" height="2" src="#pathEscena1" ></a-image>
          <a-image id="titulo" position="0 -1.5 -1" rotation="0 0 0" width="4" height="1" src="#tituloEscena1" ></a-image>
        </a-entity>
      </a-entity>

      <a-sphere class="escena" src="#bgEscena1" radius="1">
        <a-animation attribute="scale" direction="alternate" dur="4000" easing="ease-in" from="0 0 0" to="10 10 -10" repeat="0"></a-animation>
        <a-animation attribute="position" direction="alternate" dur="4000" easing="ease-out" from="0 1.5 -12" to="0 1.5 0" repeat="0"></a-animation>
        <a-animation attribute="rotation" direction="alternate" dur="5000" easing="ease-out" from="-180 0 0" to="0 350 0" repeat="0"></a-animation>
        <a-entity sound="src: sound/audio-1_borges.mp3; autoplay: true; volume: 3;" position="-2 1.2 0"></a-entity>
      </a-sphere>

      <a-sphere class="escena" src="#bgEscena2" radius="1" rotation="0 -90 0" position="0 10 0" scale="0 0 0"></a-sphere>

      <a-sphere class="escena" src="#bgEscena3" radius="1" rotation="0 -90 0" position="0 0 0" scale="0 0 0"></a-sphere>

      <a-sphere class="escena" src="#bgEscena4" radius="1" position="0 0 15" scale="0 0 0"></a-sphere>

      <a-torus id="portal" position="5 -.5 3.8" rotation="0 90 0" color="red" opacity=".4" segments-radial="4" segments-tubular="100" radius=".6" radius-tubular="0.02" scale="0 0 0">
        <a-sphere id="gatillo" position="0 0 0" color="red;" opacity=".2" radius=".1">
          <a-animation attribute="geometry.radius" direction="alternate" dur="800" easing="ease-out" to=".3" repeat="indefinite"></a-animation>
        </a-sphere>
      </a-torus>

    </a-scene>

    <script>

      var escenaNro = 0;

      var transiciones = {

        transicion1:{
          animEscenaSale:
          '<a-animation attribute="scale" begin="1500" dur="0" easing="linear" to="0 0 0" repeat="0"></a-animation>',
          animEscenaEntra:
          '<a-animation attribute="scale" dur="0" easing="linear" to="9 9 -9" repeat="0"></a-animation>' + 
          '<a-animation attribute="position" direction="alternate" dur="2000" easing="linear" to="0 0 0" repeat="0"></a-animation>',
          posPortal: [-3.5, -2, 5],
          rotPortal: [15, -48, 0],
          pathSrc: '#pathEscena2',
          tituloSrc: '#tituloEscena2',
          audioSrc: '<a-entity sound="src: sound/audio-2_borges.mp3; autoplay: true; volume: 3;"></a-entity>'
        },

        transicion2:{
          animEscenaSale:
          '<a-animation attribute="scale" begin="1500" dur="0" easing="linear" to="0 0 0" repeat="0"></a-animation>',
          animEscenaEntra:
          '<a-animation attribute="scale" direction="alternate" dur="2000" easing="linear" to="9 9 -9" repeat="0"></a-animation>' +
          '<a-animation attribute="position" direction="alternate" dur="2000" easing="linear" to="0 0 0" repeat="0"></a-animation>',
          posPortal: [0, 2.2, 1],
          rotPortal: [0, 0, 0],
          pathSrc: '#pathEscena3',
          tituloSrc: '#tituloEscena3',
          audioSrc: '<a-entity sound="src: sound/audio-3_borges.mp3; autoplay: true; volume: 3;"></a-entity>'
        },

        transicion3:{
          animEscenaSale:
          '<a-animation attribute="material.opacity" direction="alternate" dur="1000" easing="linear" to="0" repeat="0"></a-animation>',
          animEscenaEntra:
          '<a-animation attribute="scale" direction="alternate" dur="3000" easing="linear" to="10 10 -10" repeat="0"></a-animation>' +
          '<a-animation attribute="position" direction="alternate" dur="3000" easing="linear" to="0 0 0" repeat="0"></a-animation>',
          posPortal: [1, 1, 1],
          rotPortal: [0, 0, 0],
          pathSrc: '#pathEscena4',
          tituloSrc: '#tituloEscena4',
          audioSrc: '<a-entity sound="src: sound/audio-4_borges.mp3; autoplay: true; volume: 3;"></a-entity>'
        },

        transicion4:{
          animEscenaSale:
          '<a-animation attribute="scale" direction="alternate" dur="2000" easing="linear" to="0 0 0" repeat="0"></a-animation>' + 
          '<a-animation attribute="position"  direction="alternate" dur="2000" easing="linear" to="15 0 -9" repeat="0"></a-animation>',
          animEscenaEntra:
          '<a-animation attribute="scale" direction="alternate" dur="3000" easing="linear" to="10 10 -10" repeat="0"></a-animation>' +
          '<a-animation attribute="position" direction="alternate" dur="3000" easing="linear" to="0 0 0" repeat="0"></a-animation>',
          posPortal: [1, 1, 1],
          rotPortal: [0, 0, 0],
          pathSrc: '#pathEscena1',
          tituloSrc: '#tituloEscena1',
          audioSrc: '<a-entity sound="src: sound/audio-1_borges.mp3; autoplay: true; volume: 3;"></a-entity>'
        }    
      };

      function cambioEscena(){
        var posicion = Object.keys(transiciones)[escenaNro];
        escenaNro++;
        aEscena(
          transiciones[posicion].animEscenaSale,
          transiciones[posicion].animEscenaEntra,
          transiciones[posicion].posPortal,
          transiciones[posicion].rotPortal,
          transiciones[posicion].pathSrc,
          transiciones[posicion].tituloSrc,
          transiciones[posicion].audioSrc
        );
      }

      function mostrarPortal(){
        portal.setAttribute('scale', { x: 1, y: 1, z: 1 });
      }

      function aEscena(animEscenaSale, animEscenaEntra, posPortal, rotPortal, pathSrc, tituloSrc, audioSrc) {
        document.getElementsByClassName("escena")[(escenaNro - 1)].innerHTML = animEscenaSale;
        document.getElementsByClassName("escena")[escenaNro].innerHTML = animEscenaEntra + audioSrc;
        path.setAttribute('src', pathSrc);
        titulo.setAttribute('src', tituloSrc);
        portal.setAttribute('scale', { x: 0, y: 0, z: 0 });
        portal.setAttribute('position', { x: posPortal[0], y: posPortal[1], z: posPortal[2] });
        portal.setAttribute('rotation', { x: rotPortal[0], y: rotPortal[1], z: rotPortal[2] });
      }

      portal.onmouseenter = function (e) {
        gatillo.innerHTML = '<a-animation attribute="geometry.radius" dur="3000" easing="linear" from=".4" to=".6" repeat="0"></a-animation>';
      };

      portal.onmouseleave = function (e) {
        gatillo.innerHTML = '<a-animation attribute="geometry.radius" direction="alternate" dur="800" easing="ease-out" from=".2" to=".3" repeat="indefinite"></a-animation>';
      };

      portal.addEventListener('animationend', cambioEscena, false);

      for( var i in document.getElementsByClassName("escena") ){
          document.getElementsByClassName("escena")[i].addEventListener('sound-ended', mostrarPortal, false);
      }

    </script>

  </body>
</html>
